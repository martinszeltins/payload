services:
    payload-app:
        container_name: payload-app
        build:
            context: .
            dockerfile: Dockerfile
        ports:
            - "8911:3000"
        volumes:
            - .:/app
            - node_modules:/app/node_modules
            - nuxt_cache:/app/.nuxt
            - output_cache:/app/.output
            - ./data:/app/data
        environment:
            - NODE_ENV=development
            - DATABASE_PATH=/app/data/logs.db
        command: tail -f /dev/null
        stdin_open: true
        tty: true
        restart: unless-stopped

volumes:
    node_modules:
        driver: local
    nuxt_cache:
        driver: local
    output_cache:
        driver: local
    data:
        driver: local
